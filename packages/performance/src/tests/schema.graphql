# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.
#
# OpenCRVS is also distributed under the terms of the Civil Registration
# & Healthcare Disclaimer located at http://opencrvs.org/license.
#
# Copyright (C) The OpenCRVS Authors. OpenCRVS and the OpenCRVS
# graphic logo are (registered/a) trademark(s) of Plan International.
# THIS WAS GENERATED WITH THE COMMAND LINE TOOL get-graphql-schema
# get-graphql-schema http://localhost:7070/graphql > schema.graphql

type Address {
  use: String
  type: String
  text: String
  line: [String]
  city: String
  district: String
  state: String
  postalCode: String
  country: String
  from: Date
  to: Date
}

input AddressInput {
  use: String
  type: String
  text: String
  line: [String]
  city: String
  district: String
  state: String
  postalCode: String
  country: String
  from: Date
  to: Date
}

type Attachment {
  id: ID!
  data: String
  status: String
  originalFileName: String
  systemFileName: String
  createdAt: Date
}

input AttachmentInput {
  data: String
  status: String
  originalFileName: String
  systemFileName: String
  createdAt: Date
}

type BirthRegistration {
  id: ID!
  registration: Registration
  child: Person
  mother: Person
  father: Person
  informant: Person
  birthType: BirthType # Not in BDRIS2
  weightAtBirth: Float
  attendantAtBirth: AttendantType
  presentAtBirthRegistration: BirthRegPresence
  birthLocation: Location
  birthRegistrationType: BirthRegType
  createdAt: Date
  updatedAt: Date
}

input BirthRegistrationInput {
  registration: RegistrationInput
  child: PersonInput
  mother: PersonInput
  father: PersonInput
  informant: PersonInput
  birthType: BirthType # Not in BDRIS2
  weightAtBirth: Float
  attendantAtBirth: AttendantType
  presentAtBirthRegistration: BirthRegPresence
  birthLocation: LocationInput
  birthRegistrationType: BirthRegType
  createdAt: Date
  updatedAt: Date
}

enum BirthRegType {
  SELF
  STATELESS
  REFUGEE
  INFORMANT_ONLY
  SINGLE_PARENT
  TEST
}

enum BirthRegPresence {
  BOTH_PARENTS
  INFORMANT_ONLY
  MOTHER_ONLY
  FATHER_ONLY
  OTHER
}

enum RegistrationContactType {
  MOTHER
  FATHER
}

enum MaritalStatusType {
  SINGLE
  MARRIED
  WIDOWED
  DIVORCED
  NOT_STATED
  SEPARATED
}

enum EducationType {
  NO_SCHOOLING
  PRIMARY_ISCED_1
  LOWER_SECONDARY_ISCED_2
  UPPER_SECONDARY_ISCED_3
  POST_SECONDARY_ISCED_4
  FIRST_STAGE_TERTIARY_ISCED_5
  SECOND_STAGE_TERTIARY_ISCED_6
  NOT_STATED
}

enum AttendantType {
  PHYSICIAN
  NURSE
  NURSE_MIDWIFE
  MIDWIFE
  OTHER_PARAMEDICAL_PERSONNEL
  LAYPERSON
  NONE
  OTHER
}

enum BirthType {
  SINGLE
  TWIN
  TRIPLET
  QUADRUPLET
  HIGHER_MULTIPLE_DELIVERY
}

enum CauseOfDeath {
  NATURAL
  ACCIDENT
}

type ContactPoint {
  system: String
  value: String
  use: String
}

input ContactPointInput {
  system: String
  value: String
  use: String
}

scalar Date

type DeathRegistration {
  id: ID!
  registration: Registration
  deceased: Person
  mother: Person
  father: Person
  informant: Person
  spouse: Person
  deathLocation: Location
  causeOfDeath: CauseOfDeath
  createdAt: Date
  updatedAt: Date
}

input DeathRegistrationInput {
  registration: RegistrationInput
  deceased: PersonInput
  mother: PersonInput
  father: PersonInput
  informant: PersonInput
  spouse: PersonInput
  deathLocation: LocationInput
  causeOfDeath: CauseOfDeath
  createdAt: Date
  updatedAt: Date
}

type Dummy {
  dummy: String!
}

type HumanName {
  use: String
  firstNames: String
  familyName: String
}

input HumanNameInput {
  use: String
  firstNames: String
  familyName: String
}

type Location {
  id: ID!
  identifier: [ID]
  status: String
  name: String
  alias: [String]
  description: String
  telecom: [ContactPoint]
  address: Address
  longitude: Float
  latitude: Float
  altitude: Float
}

input LocationInput {
  identifier: [ID]
  status: String
  name: String
  alias: [String]
  description: String
  telecom: [ContactPointInput]
  address: AddressInput
  longitude: Float
  latitude: Float
  altitude: Float
}

type Mutation {
  createNotification(details: NotificationInput!): Notification!
  voidNotification(id: ID!): Notification
  createBirthRegistration(details: BirthRegistrationInput!): ID!
  updateBirthRegistration(
    id: ID!
    details: BirthRegistrationInput!
  ): BirthRegistration!
  markBirthAsVerified(id: ID!, location: LocationInput): BirthRegistration
  markBirthAsRegistered(id: ID!, location: LocationInput): BirthRegistration
  markBirthAsCertified(id: ID!, location: LocationInput): BirthRegistration
  markEventAsVoided(
    id: ID!
    reason: String!
    location: LocationInput
  ): BirthRegistration
  createDeathRegistration(details: DeathRegistrationInput!): ID!
  updateDeathRegistration(
    id: ID!
    details: DeathRegistrationInput!
  ): DeathRegistration!
  markDeathAsVerified(id: ID!, location: LocationInput): DeathRegistration
  markDeathAsRegistered(id: ID!, location: LocationInput): DeathRegistration
  markDeathAsCertified(id: ID!, location: LocationInput): DeathRegistration
  markDeathAsVoided(
    id: ID!
    reason: String!
    location: LocationInput
  ): DeathRegistration
}

type Notification {
  id: ID!
  child: Person
  mother: Person
  father: Person
  informant: Person
  location: Location
  createdAt: Date
  updatedAt: Date
}

input NotificationInput {
  child: PersonInput
  mother: PersonInput
  father: PersonInput
  informant: PersonInput
  location: LocationInput
  createdAt: Date
  updatedAt: Date
}

type Person {
  id: ID
  identifier: [ID]
  name: [HumanName]
  telecom: [ContactPoint]
  gender: String
  birthDate: String
  address: [Address]
  photo: Attachment
}

input PersonInput {
  identifier: [ID]
  name: [HumanNameInput]
  telecom: [ContactPointInput]
  gender: String
  birthDate: String
  address: [AddressInput]
  photo: AttachmentInput
  nationality: [String]
  maritalStatus: MaritalStatusType
  dateOfMarriage: Date
  educationalAttainment: EducationType
  multipleBirth: Int
}

type Query {
  listNotifications(
    locationIds: [String]
    status: String
    userId: String
    from: Date
    to: Date
  ): [Notification]
  fetchBirthRegistration(id: ID): BirthRegistration
}

type Registration {
  id: ID!
  trackingId: String
  registrationNumber: String
  paperFormID: String
  bookId: ID
  status: [RegWorkflow]
  type: RegistrationType
  attachments: [Attachment]
  location: Location
  contact: RegistrationContactType
}

input RegistrationInput {
  trackingId: String
  registrationNumber: String
  paperFormID: String
  bookId: ID
  status: [RegWorkflowInput]
  type: RegistrationType
  attachments: [AttachmentInput]
  location: LocationInput
  contact: RegistrationContactType
}

enum RegistrationType {
  BIRTH
  DEATH
}

enum RegStatus {
  DECLARED
  VERIFIED
  REGISTERED
  CERTIFIED
}

input CommentInput {
  user: UserInput
  comment: String
  createdAt: Date
}

type Comment { # Annotation
  id: ID!
  user: User # -> .authorString
  comment: String # -> .text
  createdAt: Date # -> .time
}

type RegWorkflow {
  id: ID!
  type: RegStatus
  user: User
  timestamp: Date
  comments: [Comment]
  location: Location
}

input RegWorkflowInput {
  type: RegStatus
  user: UserInput
  timestamp: Date
  comments: [CommentInput]
  location: LocationInput
}

type User {
  id: ID!
  userName: String
  created: Date
  lastLoggedIn: Date
  firstName: String
  lastName: String
  email: String
  telecom: [ContactPoint]
  role: [UserRole]!
  address: Address
  primaryOffice: Location
  currentLocation: Location
  catchmentArea: [Location]
}

input UserInput {
  userName: String
  created: Date
  lastLoggedIn: Date
  firstName: String
  lastName: String
  email: String
  telecom: [ContactPointInput]
  role: [UserRoleInput]!
  address: AddressInput
  primaryOffice: LocationInput
  currentLocation: LocationInput
  catchmentArea: [LocationInput]
}

type UserRole {
  id: ID!
  type: String
}

input UserRoleInput {
  type: String
}
