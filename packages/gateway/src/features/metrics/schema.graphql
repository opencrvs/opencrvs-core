# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.
#
# OpenCRVS is also distributed under the terms of the Civil Registration
# & Healthcare Disclaimer located at http://opencrvs.org/license.
#
# Copyright (C) The OpenCRVS Authors. OpenCRVS and the OpenCRVS
# graphic logo are (registered/a) trademark(s) of Plan International.

type EventMetrics {
  total: Int!
  gender: String!
  eventLocationType: String!
  timeLabel: String!
  practitionerRole: String!
}

type Estimation {
  totalEstimation: Int!
  maleEstimation: Int!
  femaleEstimation: Int!
  locationId: String!
  estimationYear: Int!
  locationLevel: String!
}

type TotalMetricsResult {
  estimated: Estimation!
  results: [EventMetrics!]!
}

type PaymentMetric {
  total: Float!
  paymentType: String!
}
type CorrectionMetric {
  total: Float!
  reason: String!
}

type DeclarationsStartedMetrics {
  fieldAgentDeclarations: Int!
  hospitalDeclarations: Int!
  officeDeclarations: Int!
  totalWithRole: [TotalAndRole]
}

type TotalAndRole {
  role: String!
  total: Int!
}

type MonthWiseEstimationMetrics {
  details: [MonthWiseTargetDayEstimation]
  total: EventInTargetDayEstimationCount
}

type MonthWiseTargetDayEstimation {
  actualTotalRegistration: Int!
  actualTargetDayRegistration: Int!
  estimatedRegistration: Float!
  estimatedTargetDayPercentage: Float!
  month: String!
  year: String!
  startOfMonth: String!
  endOfMonth: String!
}

type EventInTargetDayEstimationCount {
  actualTotalRegistration: Int!
  actualTargetDayRegistration: Int!
  estimatedRegistration: Float!
  estimatedTargetDayPercentage: Float!
}

type LocationWiseEstimationMetrics {
  details: [LocationWiseTargetDayEstimation]
  total: EventInTargetDayEstimationCount
}

type LocationWiseTargetDayEstimation {
  actualTotalRegistration: Int!
  actualTargetDayRegistration: Int!
  estimatedRegistration: Float!
  estimatedTargetDayPercentage: Float!
  locationId: String!
  locationName: String!
}

type TimeLoggedMetrics {
  status: String!
  trackingId: String
  eventType: String!
  time: String!
}

type TimeLoggedMetricsResultSet {
  results: [TimeLoggedMetrics]
  totalItems: Int
}

type Query {
  getTotalMetrics(
    timeStart: String!
    timeEnd: String!
    locationId: String
    event: String!
  ): TotalMetricsResult
  getTotalPayments(
    timeStart: String!
    timeEnd: String!
    locationId: String
    event: String!
  ): [PaymentMetric!]
  getTotalCorrections(
    timeStart: String!
    timeEnd: String!
    locationId: String
    event: String!
  ): [CorrectionMetric!]
  getDeclarationsStartedMetrics(
    timeStart: String!
    timeEnd: String!
    locationId: String!
    event: String!
  ): DeclarationsStartedMetrics
  fetchMonthWiseEventMetrics(
    timeStart: String!
    timeEnd: String!
    locationId: String!
    event: String!
  ): MonthWiseEstimationMetrics
  fetchLocationWiseEventMetrics(
    timeStart: String!
    timeEnd: String!
    locationId: String!
    event: String!
  ): LocationWiseEstimationMetrics
  fetchTimeLoggedMetricsByPractitioner(
    timeStart: String!
    timeEnd: String!
    practitionerId: String!
    locationId: String!
    count: Int!
  ): TimeLoggedMetricsResultSet
}
